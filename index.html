<!DOCTYPE html>
<html>
<head>
    <title>Eamon's Dashboard</title>
    <meta http-equiv="refresh" content="3600">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        :root {
            --safe-margin: 2vw; 
        }

        body {
            background-color: #111;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 1s ease-in-out;
            color: #fff;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: var(--safe-margin);
            height: 100vh;
            width: 100vw;
            box-sizing: border-box;
            overflow: hidden; 
        }

        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.45); 
            z-index: -1;
        }

        /* MASTER GRID */
        .master-grid {
            display: grid;
            /* Left (25%) | Middle (37.5%) | Right (37.5%) */
            grid-template-columns: 25fr 37.5fr 37.5fr; 
            /* Row 1 (Header 18vh) | Row 2 (Rest of screen) */
            grid-template-rows: 18vh 1fr; 
            gap: 2vh; 
            height: 100%;
            width: 100%;
        }

        /* --- GENERIC BOX STYLES --- */
        .box {
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15); 
            border-radius: 16px; 
            padding: 1.5vh; 
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3); 
            box-sizing: border-box; 
            min-width: 0; 
        }

        /* --- STACKS --- */
        .stack-container {
            display: flex;
            flex-direction: column;
            gap: 2vh;
            height: 100%;
            overflow: hidden;
            min-width: 0;
        }

        /* --- GRID PLACEMENT --- */

        /* 1. LEFT COLUMN */
        .left-stack { 
            grid-column: 1; 
            grid-row: 1 / span 2; 
        }

        /* 2. MIDDLE COLUMN */
        .time-box { 
            grid-column: 2; 
            grid-row: 1; 
            justify-content: center; 
            text-align: center; 
        }
        
        .subjects-box { 
            grid-column: 2; 
            grid-row: 2; 
            background: rgba(0, 0, 0, 0.7); 
        }

        /* 3. RIGHT COLUMN */
        .header-right-split {
            grid-column: 3;
            grid-row: 1;
            display: grid;
            grid-template-columns: 1fr 1fr; /* Split equally */
            gap: 2vh;
        }

        .right-stack { 
            grid-column: 3; 
            grid-row: 2; 
        }

        /* --- WIDGET SIZING --- */

        .weather-box {
            flex: 1; 
            padding: 0; overflow: hidden;
        }
        .weather-box iframe {
            width: 100%; height: 100%; border: none;
            transform: scale(1.05); transform-origin: top center; 
        }

        .mlb-box { flex: 0 0 25vh; overflow: hidden; }
        
        .uniform-box   { justify-content: center; text-align: center; background: rgba(40, 50, 60, 0.65); }
        .countdown-box { justify-content: center; text-align: center; }

        .routine-box { flex: 0 0 auto; }

        .calendar-box {
            flex: 1; 
            padding: 0;
            background: #fff;
            filter: invert(0.9) hue-rotate(180deg);
            border-radius: 12px;
            overflow: hidden;
        }
        .calendar-box iframe { width: 100%; height: 100%; border: none; }

        /* --- TYPOGRAPHY --- */
        h2 { 
            margin: 0 0 1vh 0; font-size: 2.2vh; 
            color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 2px; 
            border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px;
        }

        #clock { font-size: 8vh; font-weight: 800; line-height: 0.9; letter-spacing: -2px; }
        #date { font-size: 2.2vh; color: rgba(255,255,255,0.8); }
        
        .big-stat { font-size: 5vh; font-weight: 800; line-height: 1; color: #ffeb3b; }
        .sub-stat { font-size: 1.5vh; color: #ccc; }
        
        .uniform-icon { font-size: 5vh; margin: 0; line-height: 1; }
        #todays-uniform { font-size: 2.2vh; font-weight: bold; margin-top: 0.5vh; }

        /* LIST STYLES */
        ul { list-style: none; padding: 0; margin: 0; }

        /* Subjects */
        .subjects-box ul {
            display: flex; flex-direction: column;
            justify-content: space-evenly; height: 100%;
        }
        .subjects-box li {
            font-size: 4vh; 
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 0.5vh 0;
        }
        .subjects-box li:last-child { border-bottom: none; }

        /* Checklist */
        .routine-box ul { 
            display: grid;
            grid-template-columns: 1fr 1fr; 
            gap: 1.5vh; 
        }
        .routine-box li { 
            font-size: 2.2vh; 
            display: flex; 
            align-items: center; 
        }
        .icon { width: 4vh; text-align: center; margin-right: 1vw; font-size: 2.5vh; }
        .daily-chore { 
            grid-column: span 2; 
            color: #ffd700; 
            font-weight: bold; 
            border-top: 1px solid rgba(255,255,255,0.1); 
            padding-top: 1vh; 
            margin-top: 0.5vh; 
            width: 100%; 
        }

        #mlb-news li { font-size: 1.8vh; padding-bottom: 1vh; border-bottom: 1px solid rgba(255,255,255,0.1); opacity: 0.8;}

    </style>
</head>
<body>

<div class="master-grid">

    <div class="stack-container left-stack">
        <div class="box weather-box">
            <iframe src="https://indify.co/widgets/live/weather/0UC6M14JlHPtKtLpox61"></iframe>
        </div>
        <div class="box mlb-box">
            <h2 style="color:#e53935; display:flex; justify-content:space-between;">
                <span>MLB ‚öæ</span>
                <span style="font-size: 1.5vh; color:#fff; opacity:0.7;">Start: <span id="mlb-days">0</span>d</span>
            </h2>
            <ul id="mlb-news" style="display:flex; flex-direction:column; gap:1vh;">
                <li>Loading News...</li>
            </ul>
        </div>
    </div>

    <div class="box time-box">
        <div id="clock">--:--</div>
        <div id="date">Loading...</div>
    </div>
    
    <div class="box subjects-box">
        <h2 id="subjects-title">Today's Subjects</h2>
        <ul id="subject-list">
            <li>Loading...</li>
        </ul>
    </div>

    <div class="header-right-split">
        <div class="box countdown-box">
            <h2 style="border:none; margin:0; font-size:1.5vh;">Japan üáØüáµ</h2>
            <div class="big-stat" id="countdown">0</div>
            <div class="sub-stat">Days</div>
        </div>
        <div class="box uniform-box">
            <h2 id="uniform-title" style="border:none; margin:0; font-size:1.5vh; color:#aaa;">Wear</h2>
            <div class="uniform-icon" id="uniform-icon">üëî</div>
            <div id="todays-uniform">Loading...</div>
        </div>
    </div>

    <div class="stack-container right-stack">
        <div class="box routine-box">
            <h2 id="checklist-title">Checklist</h2>
            <ul>
                <li><span class="icon">üíª</span> Charge PC</li>
                <li><span class="icon">üç±</span> Pack Lunch</li>
                <li><span class="icon">ü¶∑</span> Brush Teeth</li>
                <li><span class="icon">üéí</span> Pack Bag</li>
                <li class="daily-chore"><span class="icon">‚ö†Ô∏è</span> <span id="todays-chore">Loading...</span></li>
            </ul>
        </div>
        <div class="box calendar-box">
            <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=Australia%2FBrisbane&showPrint=0&showTitle=0&showNav=0&showDate=0&showCalendars=0&mode=AGENDA&showTabs=0&showTz=0&src=MGNjZGFmNjE4OTFhZjI0NjgyMmM2Nzc0NTUyMjkyYjVhNjMxMjg5ZDA0ZWNjNjBkODZiMjc4MmNhNWRjZmU0OEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23009688" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
        </div>
    </div>

</div>

<script>
    // --- CONFIGURATION ---
    const schoolStartDate = new Date("2026-01-28T00:00:00"); 
    const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    
    // 1. SUBJECTS
    const schoolTimetable = {
        "Monday": ["üì¢ PC", "üåç Humanities", "üìñ Double English", "ü•ó Future Foods", "üïäÔ∏è RaVE", "üßÆ Maths", "üé∏ Double Rock", "üèÜ APS Sport"],
        "Tuesday": ["üì¢ PC", "üìñ Double English", "üßò Assembly", "üßÆ Maths", "ü•ó Future Foods", "üèÉ PE", "üïäÔ∏è RaVE", "üß™ Science"],
        "Wednesday": ["üì¢ PC", "üßÆ Double Maths", "üìñ English", "üåç Double Humanities", "üé∏ School of Rock", "üß™ Science", "üá®üá≥ Chinese"],
        "Thursday": ["üì¢ PC", "üé∏ School of Rock", "üèÉ Double PE", "üßÆ Double Maths", "üåç Humanities", "ü•ó Double Foods"],
        "Friday": ["üß™ Double Science", "üìñ English", "üá®üá≥ Chinese", "üèÜ Sport"], 
        "Saturday": ["üéâ No School", "üéÆ Relax", "üßπ Clean Room"],
        "Sunday": ["üéâ No School", "üìù Finish Homework", "üéí Pack Bag"]
    };

    // 2. CHORES
    const dailyChores = {
        "Monday": "Empty Dishwasher",
        "Tuesday": "Take out Bins",
        "Wednesday": "Walk the Dog",
        "Thursday": "Clean Room",
        "Friday": "Pack Sports Gear",
        "Saturday": "Vacuum",
        "Sunday": "Iron Uniforms"
    };

    // 3. UNIFORMS
    const schoolUniforms = {
        "Monday": "Sports PE",
        "Tuesday": "Formal Grey",
        "Wednesday": "Formal Grey",
        "Thursday": "Formal Grey",
        "Friday": "Sports PE",
        "Saturday": "Casual",
        "Sunday": "Casual"
    };

    // --- MAIN LOGIC ---

    function updateSchoolData() {
        const now = new Date();
        const currentHour = now.getHours();
        
        // --- THE MIDDAY SWITCH LOGIC ---
        let displayDate = new Date(now); 
        let isTomorrow = false;

        // If it is 12:00 PM or later, switch to Tomorrow
        if (currentHour >= 12) {
            displayDate.setDate(now.getDate() + 1);
            isTomorrow = true;
        }

        const dayName = daysOfWeek[displayDate.getDay()];

        // Update Titles based on the switch
        if (isTomorrow) {
            document.getElementById("subjects-title").innerText = "Tomorrow's Subjects";
            document.getElementById("uniform-title").innerText = "Wear Tmrw";
            document.getElementById("checklist-title").innerText = "Prep for Tmrw";
        } else {
            document.getElementById("subjects-title").innerText = "Today's Subjects";
            document.getElementById("uniform-title").innerText = "Wear Today";
            document.getElementById("checklist-title").innerText = "Morning Checklist";
        }

        // HOLIDAY CHECK (Using the original school start date logic)
        // Note: We check if the *displayDate* is before school starts
        if (displayDate < schoolStartDate) {
            document.getElementById("subject-list").innerHTML = `
                <li style="text-align:center; color:#4fc3f7; font-size:8vh;">üéâ</li>
                <li style="text-align:center;">Holiday Mode</li>
                <li style="text-align:center; font-size:2.5vh; opacity:0.7;">Relax & Recharge</li>
            `;
            document.getElementById("todays-uniform").textContent = "Casual";
            document.getElementById("uniform-icon").textContent = "üëï";
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
        } else {
            // NORMAL TERM
            const subjects = schoolTimetable[dayName] || ["No School Data"];
            const subjectList = document.getElementById("subject-list");
            subjectList.innerHTML = ""; 
            subjects.forEach(subject => {
                const li = document.createElement("li");
                li.textContent = subject;
                subjectList.appendChild(li);
            });
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
            
            const uniform = schoolUniforms[dayName] || "Casual";
            document.getElementById("todays-uniform").textContent = uniform;
            
            const uniformIcon = document.getElementById("uniform-icon");
            if(uniform.includes("Sport") || uniform.includes("PE")) {
                uniformIcon.textContent = "üëü"; 
            } else if (uniform.includes("Formal")) {
                uniformIcon.textContent = "üëî"; 
            } else {
                uniformIcon.textContent = "üëï"; 
            }
        }
    }

    updateSchoolData();

    // CLOCK
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        document.getElementById('date').innerText = now.toLocaleDateString([], {weekday: 'long', month: 'short', day: 'numeric'});
        
        // Re-run the school data logic every minute to catch the 12:00 PM switch automatically
        if(now.getSeconds() === 0) {
            updateSchoolData();
        }
    }
    setInterval(updateClock, 1000);
    updateClock();

    // COUNTDOWN
    const targetDate = new Date("2026-06-18T00:00:00").getTime();
    function updateCountdown() {
        const now = new Date().getTime();
        const diff = targetDate - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24)); 
        document.getElementById('countdown').innerText = days > 0 ? days : "Here!";
    }
    updateCountdown();

    // --- MLB LOGIC ---
    const openingDay = new Date("2026-03-26T00:00:00").getTime();
    
    function updateMLB() {
        const now = new Date().getTime();
        const diff = openingDay - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
        document.getElementById('mlb-days').innerText = days > 0 ? days : "0";
    }
    updateMLB();

    async function fetchMLBNews() {
        try {
            const res = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://www.mlb.com/feeds/news/rss.xml');
            const data = await res.json();
            const list = document.getElementById('mlb-news');
            list.innerHTML = "";
            
            // Show top 4 items
            data.items.slice(0, 4).forEach(item => {
                const li = document.createElement('li');
                let title = item.title;
                if(title.length > 55) title = title.substring(0, 55) + "...";
                li.innerText = title;
                list.appendChild(li);
            });
        } catch (error) {
            document.getElementById('mlb-news').innerHTML = "<li style='opacity:0.5'>News unavailable</li>";
        }
    }
    fetchMLBNews();
    setInterval(fetchMLBNews, 3600000); 

    // BACKGROUNDS
    const images = [
        "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1506929562872-bb421503ef21?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1542051841857-5f90071e7989?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1528360983277-13d9b152c6d1?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=2560&q=80"
    ];
    let currentImageIndex = 0;
    function rotateBackground() {
        document.body.style.backgroundImage = `url('${images[currentImageIndex]}')`;
        currentImageIndex = (currentImageIndex + 1) % images.length;
    }
    rotateBackground();
    setInterval(rotateBackground, 30000);
</script>

</body>
</html>
