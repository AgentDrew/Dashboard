<!DOCTYPE html>
<html>
<head>
    <title>Eamon's Dashboard</title>
    <meta http-equiv="refresh" content="3600">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        :root {
            --safe-margin: 2vw; 
        }

        body {
            background-color: #111;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 1s ease-in-out;
            color: #fff;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: var(--safe-margin);
            height: 100vh;
            width: 100vw;
            box-sizing: border-box;
            overflow: hidden; 
        }

        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.45); 
            z-index: -1;
        }

        /* MASTER LAYOUT: Header Row + Main Row */
        .dashboard-container {
            display: flex;
            flex-direction: column;
            gap: 2vh;
            height: 100%;
        }

        /* 1. TOP HEADER (Time, Countdown, Yen) */
        .header-row {
            flex: 0 0 18vh; /* Fixed height for top stats */
            display: grid;
            grid-template-columns: 1fr 1fr 1fr; /* 3 Equal columns */
            gap: 2vh;
        }

        /* 2. MAIN CONTENT (3 Columns below) */
        .main-row {
            flex: 1; /* Fills the rest of the screen */
            display: grid;
            /* Left (Weather/MLB) | Middle (Subjects) | Right (Checklist/Cal) */
            grid-template-columns: 25fr 40fr 35fr; 
            gap: 2vh;
            overflow: hidden; /* Prevents scroll */
        }

        /* COLUMNS inside Main Row */
        .col-stack {
            display: flex;
            flex-direction: column;
            gap: 2vh;
            height: 100%;
        }

        /* GENERIC BOX STYLE */
        .box {
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15); 
            border-radius: 16px; 
            padding: 1.5vh; 
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3); 
        }

        /* --- HEADER WIDGETS --- */
        .time-box { justify-content: center; align-items: center; }
        .countdown-box { justify-content: center; align-items: center; text-align: center; }
        .currency-box { justify-content: center; align-items: center; text-align: center; }

        /* --- LEFT WIDGETS (Weather/MLB) --- */
        .weather-box {
            flex: 0 0 35%; /* Top 35% of left column */
            padding: 0;
            overflow: hidden;
        }
        .weather-box iframe {
            width: 100%; height: 100%; border: none;
            transform: scale(1.1); transform-origin: top center;
        }

        .mlb-box {
            flex: 1; /* Fills bottom of left column */
            overflow: hidden;
        }

        /* --- MIDDLE WIDGETS (Subjects) --- */
        .subjects-box {
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
        }

        /* --- RIGHT WIDGETS (Checklist/Cal) --- */
        .routine-box {
            flex: 0 0 auto; /* Natural height based on list */
        }

        .calendar-box {
            flex: 1; /* Fills bottom of right column */
            padding: 0;
            background: #fff;
            filter: invert(0.9) hue-rotate(180deg);
            border-radius: 12px;
            overflow: hidden;
        }
        .calendar-box iframe { width: 100%; height: 100%; border: none; }

        /* --- TYPOGRAPHY --- */
        h2 { 
            margin: 0 0 1vh 0; font-size: 2.2vh; 
            color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 2px; 
            border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px;
        }

        /* Header specific text */
        #clock { font-size: 8vh; font-weight: 800; line-height: 0.9; letter-spacing: -2px; }
        #date { font-size: 2.2vh; color: rgba(255,255,255,0.8); }
        
        .big-stat { font-size: 6vh; font-weight: 800; line-height: 1; color: #ffeb3b; }
        .sub-stat { font-size: 1.8vh; color: #ccc; }
        
        #yen-rate { font-size: 6vh; color: #6fcf73; font-weight: 800; line-height: 1;}

        /* Subject List */
        .subjects-box ul {
            list-style: none; padding: 0; margin: 0;
            display: flex; flex-direction: column;
            justify-content: space-evenly; 
            height: 100%;
        }
        .subjects-box li {
            font-size: 4vh; 
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 0.5vh 0;
        }
        .subjects-box li:last-child { border-bottom: none; }

        /* Checklist */
        .routine-box ul {
            list-style: none; padding: 0; margin: 0;
            display: flex; flex-direction: column; gap: 1.5vh;
        }
        .routine-box li {
            font-size: 2.2vh; 
            display: flex; align-items: center;
        }
        .icon { width: 4vh; text-align: center; margin-right: 1vw; font-size: 2.5vh; }
        .daily-chore { color: #ffd700; font-weight: bold; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1vh; margin-top: 0.5vh; width: 100%; }

        /* MLB */
        #mlb-news li { font-size: 1.8vh; padding-bottom: 1vh; border-bottom: 1px solid rgba(255,255,255,0.1); opacity: 0.8;}

    </style>
</head>
<body>

<div class="dashboard-container">

    <div class="header-row">
        <div class="box time-box">
            <div id="clock">--:--</div>
            <div id="date">Loading...</div>
        </div>
        <div class="box countdown-box">
            <h2 style="border:none; margin:0; font-size:1.8vh;">Japan Trip ğŸ‡¯ğŸ‡µ</h2>
            <div class="big-stat" id="countdown">0</div>
            <div class="sub-stat">Days to go</div>
        </div>
        <div class="box currency-box">
            <h2 style="border:none; margin:0; font-size:1.8vh;">AUD to JPY</h2>
            <div id="yen-rate">...</div>
            <div class="sub-stat">1 AUD = Â¥<span id="exact-rate">...</span></div>
        </div>
    </div>

    <div class="main-row">
        
        <div class="col-stack">
            <div class="box weather-box">
                <iframe src="https://indify.co/widgets/live/weather/0UC6M14JlHPtKtLpox61"></iframe>
            </div>
            <div class="box mlb-box">
                <h2 style="color:#e53935; display:flex; justify-content:space-between;">
                    <span>MLB âš¾</span>
                    <span style="font-size: 1.5vh; color:#fff; opacity:0.7;">Start: <span id="mlb-days">0</span>d</span>
                </h2>
                <ul id="mlb-news" style="list-style:none; padding:0; display:flex; flex-direction:column; gap:1vh;">
                    <li>Loading News...</li>
                </ul>
            </div>
        </div>

        <div class="col-stack">
            <div class="box subjects-box">
                <h2>Today's Subjects</h2>
                <ul id="subject-list">
                    <li>Loading...</li>
                </ul>
            </div>
        </div>

        <div class="col-stack">
            <div class="box routine-box">
                <h2 style="display:flex; justify-content:space-between; align-items:center;">
                    Checklist
                    <span style="font-size:1.6vh; background:rgba(255,255,255,0.15); padding:2px 8px; border-radius:4px;">
                        Wear: <span id="todays-uniform" style="color:#fff;">...</span>
                    </span>
                </h2>
                <ul>
                    <li><span class="icon">ğŸ’»</span> Charge Laptop</li>
                    <li><span class="icon">ğŸ±</span> Pack Lunch</li>
                    <li><span class="icon">ğŸ¦·</span> Brush Teeth</li>
                    <li><span class="icon">ğŸ’</span> Pack Bag</li>
                    <li class="daily-chore"><span class="icon">âš ï¸</span> <span id="todays-chore">Loading...</span></li>
                </ul>
            </div>
            <div class="box calendar-box">
                <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=Australia%2FBrisbane&showPrint=0&showTitle=0&showNav=0&showDate=0&showCalendars=0&mode=AGENDA&showTabs=0&showTz=0&src=MGNjZGFmNjE4OTFhZjI0NjgyMmM2Nzc0NTUyMjkyYjVhNjMxMjg5ZDA0ZWNjNjBkODZiMjc4MmNhNWRjZmU0OEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23009688" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
            </div>
        </div>

    </div>
</div>

<script>
    // --- CONFIGURATION ---
    const schoolStartDate = new Date("2026-01-28T00:00:00"); 
    const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    
    // 1. SUBJECTS
    const schoolTimetable = {
        "Monday": ["ğŸ“¢ PC", "ğŸŒ Humanities", "ğŸ“– Double English", "ğŸ¥— Future Foods", "ğŸ•Šï¸ RaVE", "ğŸ§® Maths", "ğŸ¸ Double Rock", "ğŸ† APS Sport"],
        "Tuesday": ["ğŸ“¢ PC", "ğŸ“– Double English", "ğŸ§˜ Assembly", "ğŸ§® Maths", "ğŸ¥— Future Foods", "ğŸƒ PE", "ğŸ•Šï¸ RaVE", "ğŸ§ª Science"],
        "Wednesday": ["ğŸ“¢ PC", "ğŸ§® Double Maths", "ğŸ“– English", "ğŸŒ Double Humanities", "ğŸ¸ School of Rock", "ğŸ§ª Science", "ğŸ‡¨ğŸ‡³ Chinese"],
        "Thursday": ["ğŸ“¢ PC", "ğŸ¸ School of Rock", "ğŸƒ Double PE", "ğŸ§® Double Maths", "ğŸŒ Humanities", "ğŸ¥— Double Foods"],
        "Friday": ["ğŸ§ª Double Science", "ğŸ“– English", "ğŸ‡¨ğŸ‡³ Chinese", "ğŸ† Sport"], 
        "Saturday": ["ğŸ‰ No School", "ğŸ® Relax", "ğŸ§¹ Clean Room"],
        "Sunday": ["ğŸ‰ No School", "ğŸ“ Finish Homework", "ğŸ’ Pack Bag"]
    };

    // 2. CHORES
    const dailyChores = {
        "Monday": "Empty Dishwasher",
        "Tuesday": "Take out Bins",
        "Wednesday": "Walk the Dog",
        "Thursday": "Clean Room",
        "Friday": "Pack Sports Gear",
        "Saturday": "Vacuum",
        "Sunday": "Iron Uniforms"
    };

    // 3. UNIFORMS
    const schoolUniforms = {
        "Monday": "Sports PE",
        "Tuesday": "Formal Grey",
        "Wednesday": "Formal Grey",
        "Thursday": "Formal Grey",
        "Friday": "Sports PE",
        "Saturday": "Casual",
        "Sunday": "Casual"
    };

    // --- MAIN LOGIC ---

    function updateSchoolData() {
        const now = new Date();
        const dayName = daysOfWeek[now.getDay()];

        // HOLIDAY CHECK
        if (now < schoolStartDate) {
            document.getElementById("subject-list").innerHTML = `
                <li style="text-align:center; color:#4fc3f7; font-size:8vh;">ğŸ‰</li>
                <li style="text-align:center;">Holiday Mode</li>
                <li style="text-align:center; font-size:2.5vh; opacity:0.7;">Relax & Recharge</li>
            `;
            document.getElementById("todays-uniform").textContent = "Casual";
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
        } else {
            // NORMAL TERM
            const subjects = schoolTimetable[dayName] || ["No School Data"];
            const subjectList = document.getElementById("subject-list");
            subjectList.innerHTML = ""; 
            subjects.forEach(subject => {
                const li = document.createElement("li");
                li.textContent = subject;
                subjectList.appendChild(li);
            });
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
            document.getElementById("todays-uniform").textContent = schoolUniforms[dayName] || "Casual";
        }
    }

    updateSchoolData();

    // CLOCK
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        document.getElementById('date').innerText = now.toLocaleDateString([], {weekday: 'long', month: 'short', day: 'numeric'});
        
        if(now.getHours() === 0 && now.getMinutes() === 0 && now.getSeconds() === 0) {
            updateSchoolData();
        }
    }
    setInterval(updateClock, 1000);
    updateClock();

    // COUNTDOWN
    const targetDate = new Date("2026-06-18T00:00:00").getTime();
    function updateCountdown() {
        const now = new Date().getTime();
        const diff = targetDate - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24)); 
        document.getElementById('countdown').innerText = days > 0 ? days : "Here!";
    }
    updateCountdown();

    // CURRENCY
    async function fetchRate() {
        try {
            const response = await fetch('https://api.frankfurter.app/latest?from=AUD&to=JPY');
            const data = await response.json();
            const rate = data.rates.JPY;
            document.getElementById('yen-rate').innerText = "Â¥" + Math.floor(rate);
            document.getElementById('exact-rate').innerText = rate.toFixed(2);
        } catch (error) {
            document.getElementById('yen-rate').innerText = "-";
        }
    }
    fetchRate();
    setInterval(fetchRate, 3600000); 

    // --- MLB LOGIC ---
    const openingDay = new Date("2026-03-26T00:00:00").getTime();
    
    function updateMLB() {
        const now = new Date().getTime();
        const diff = openingDay - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
        document.getElementById('mlb-days').innerText = days > 0 ? days : "0";
    }
    updateMLB();

    async function fetchMLBNews() {
        try {
            const res = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://www.mlb.com/feeds/news/rss.xml');
            const data = await res.json();
            const list = document.getElementById('mlb-news');
            list.innerHTML = "";
            
            // Show top 4 items
            data.items.slice(0, 4).forEach(item => {
                const li = document.createElement('li');
                let title = item.title;
                if(title.length > 55) title = title.substring(0, 55) + "...";
                li.innerText = title;
                list.appendChild(li);
            });
        } catch (error) {
            document.getElementById('mlb-news').innerHTML = "<li style='opacity:0.5'>News unavailable</li>";
        }
    }
    fetchMLBNews();
    setInterval(fetchMLBNews, 3600000); 

    // BACKGROUNDS
    const images = [
        "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1506929562872-bb421503ef21?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1542051841857-5f90071e7989?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1528360983277-13d9b152c6d1?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=2560&q=80"
    ];
    let currentImageIndex = 0;
    function rotateBackground() {
        document.body.style.backgroundImage = `url('${images[currentImageIndex]}')`;
        currentImageIndex = (currentImageIndex + 1) % images.length;
    }
    rotateBackground();
    setInterval(rotateBackground, 30000);
</script>

</body>
</html>
