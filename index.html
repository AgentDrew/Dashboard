<!DOCTYPE html>
<html>
<head>
    <title>Eamon's Dashboard</title>
    <meta http-equiv="refresh" content="3600">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        :root {
            /* TV SAFE ZONE */
            --safe-margin: 2vw; 
        }

        body {
            background-color: #111;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 1s ease-in-out;
            color: #fff;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: var(--safe-margin);
            height: 100vh;
            width: 100vw;
            box-sizing: border-box;
            overflow: hidden; 
        }

        /* Overlay */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.45); 
            z-index: -1;
        }

        /* GRID LAYOUT - RESTORED */
        .grid-container {
            display: grid;
            /* Columns: 35% | 35% | 30% (Weather) */
            grid-template-columns: 35fr 35fr 30fr; 
            /* Rows: Header (16%) | Middle (31%) | Bottom (43%) */
            /* Adjusted slightly to ensure it stays ON SCREEN */
            grid-template-rows: 16vh 31vh 43vh; 
            gap: 2vh; 
            height: 100%;
            width: 100%;
        }

        /* HEADER */
        .header-row {
            grid-column: 1 / -1; 
            grid-row: 1;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr; 
            gap: 2vh;
        }

        /* GENERIC BOX */
        .box {
            background: rgba(0, 0, 0, 0.45); 
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15); 
            border-radius: 16px; 
            padding: 1.5vh; 
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3); 
        }

        /* HEADER SPECIFIC */
        .time-box { justify-content: center; align-items: center; }
        .countdown-box { justify-content: center; align-items: center; text-align: center; }
        .uniform-box { justify-content: center; align-items: center; text-align: center; background: rgba(40, 50, 60, 0.55); }
        .currency-box { justify-content: center; align-items: center; text-align: center; }

        /* MIDDLE LEFT: ROUTINE */
        .routine-box { 
            grid-column: 1; 
            grid-row: 2; 
        }

        /* MIDDLE CENTER: SUBJECTS */
        .subjects-box { 
            grid-column: 2; 
            grid-row: 2; 
        }
        
        /* RIGHT: WEATHER (Spans Row 2 & 3) */
        .weather-box { 
            grid-column: 3; 
            grid-row: 2 / span 2; 
            padding: 0; 
            overflow: hidden; 
            background: rgba(0, 0, 0, 0.35); 
        }

        .weather-box iframe {
            width: 100%; 
            height: 100%;
            border: none;
            display: block;
            transform: scale(1.1);
            transform-origin: center top;
        }

        /* BOTTOM LEFT: GOOGLE CALENDAR (Row 3) */
        .calendar-box {
            grid-column: 1; 
            grid-row: 3;
            padding: 0; 
            overflow: hidden; 
            background: #fff; 
            filter: invert(0.9) hue-rotate(180deg);
            border-radius: 12px;
        }
        .calendar-box iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* BOTTOM CENTER: MLB HUB (Row 3) */
        .mlb-box {
            grid-column: 2; 
            grid-row: 3;
            overflow: hidden;
            position: relative;
        }

        /* Typography */
        h2 { margin: 0 0 1vh 0; font-size: 2.2vh; color: rgba(255,255,255,0.9); text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 1px 3px rgba(0,0,0,0.6); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px;}
        .big-text { font-size: 4vh; font-weight: bold; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.5);}
        
        #clock { font-size: 9vh; font-weight: bold; line-height: 0.9; letter-spacing: -3px; text-shadow: 0 2px 5px rgba(0,0,0,0.5);}
        #date { font-size: 2.2vh; color: rgba(255,255,255,0.95); margin-top: 5px; font-weight: 400; text-shadow: 0 1px 2px rgba(0,0,0,0.5);}
        
        #countdown { font-size: 7vh; line-height: 0.9; margin-bottom: 2px; font-weight: 800; }
        .sub-text { font-size: 1.8vh; color: rgba(255,255,255,0.9); text-shadow: 0 1px 2px rgba(0,0,0,0.5);}

        .currency-box h2, .uniform-box h2 { border-bottom: none; font-size: 2vh; margin-bottom: 0; color: #aaa;}
        #yen-rate { font-size: 5vh; color: #6fcf73; text-shadow: 0 1px 3px rgba(0,0,0,0.6); line-height: 1; margin-bottom: 0; }
        
        #todays-uniform { font-size: 2.5vh; font-weight: bold; color: #fff; line-height: 1.1; margin-bottom: 0; }
        .uniform-icon { font-size: 5vh; margin-bottom: 0; display: block; }
        
        /* STANDARD LIST (Subjects) */
        .subjects-box ul { 
            list-style-type: none; padding: 0; margin: 0; 
            display: flex; flex-direction: column; 
            gap: 1vh; 
            flex-grow: 1; overflow-y: auto;
        }

        /* 2-COLUMN CHECKLIST */
        .routine-box ul {
            list-style-type: none; padding: 0; margin: 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5vh; 
            align-content: center;
            height: 100%;
        }

        li { font-size: 2.5vh; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5vh; text-shadow: 0 1px 2px rgba(0,0,0,0.6); font-weight: 500; display: flex; align-items: center; }
        li:last-child { border-bottom: none; }

        .icon { width: 5vh; display: inline-block; text-align: center; margin-right: 1.5vw; }
        .daily-chore { color: #ffd700; font-weight: bold; }

    </style>
</head>
<body>

<div class="grid-container">
    
    <div class="header-row">
        <div class="box time-box">
            <div id="clock">--:--</div>
            <div id="date">Loading...</div>
        </div>
        <div class="box countdown-box">
            <h2 style="border:none; margin:0;">Japan Trip ğŸ‡¯ğŸ‡µ</h2>
            <div class="big-text" id="countdown">0</div>
            <div class="sub-text">Days</div>
        </div>
        <div class="box uniform-box">
            <h2>Wear Today</h2>
            <span class="uniform-icon" id="uniform-icon">ğŸ‘”</span>
            <div id="todays-uniform">Loading...</div>
        </div>
        <div class="box currency-box">
            <h2>AUD to JPY</h2>
            <div class="big-text" id="yen-rate">...</div>
            <div class="sub-text">1 AUD = Â¥<span id="exact-rate">...</span></div>
        </div>
    </div>

    <div class="box routine-box">
        <h2>Morning Checklist</h2>
        <ul>
            <li><span class="icon">ğŸ’»</span> Charge Laptop</li>
            <li><span class="icon">ğŸ±</span> Pack Lunch</li>
            <li><span class="icon">ğŸ¦·</span> Brush Teeth</li>
            <li><span class="icon">ğŸ’</span> Pack Bag</li>
            <li class="daily-chore" style="grid-column: span 2;"><span class="icon">âš ï¸</span> <span id="todays-chore">Loading Chore...</span></li>
        </ul>
    </div>

    <div class="box subjects-box">
        <h2>Today's Subjects</h2>
        <ul id="subject-list">
            <li>Loading...</li>
        </ul>
    </div>

    <div class="box weather-box">
        <iframe src="https://indify.co/widgets/live/weather/0UC6M14JlHPtKtLpox61"></iframe>
    </div>

    <div class="box calendar-box">
        <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=Australia%2FBrisbane&showPrint=0&showTitle=0&showNav=0&showDate=0&showCalendars=0&mode=AGENDA&showTabs=0&showTz=0&src=MGNjZGFmNjE4OTFhZjI0NjgyMmM2Nzc0NTUyMjkyYjVhNjMxMjg5ZDA0ZWNjNjBkODZiMjc4MmNhNWRjZmU0OEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23009688" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
    </div>

    <div class="box mlb-box">
        <h2 style="margin-bottom:1vh; color:#e53935; display:flex; justify-content:space-between;">
            <span>MLB âš¾</span>
            <span style="color:white; font-size: 2vh;">Opening Day: <span id="mlb-days">...</span> days</span>
        </h2>
        <ul id="mlb-news" style="font-size: 2.2vh; gap: 1.5vh;">
            <li style="opacity:0.6;">Loading MLB News...</li>
        </ul>
    </div>

</div>

<script>
    // --- CONFIGURATION ---
    const schoolStartDate = new Date("2026-01-28T00:00:00"); 
    const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    
    // 1. SUBJECTS
    const schoolTimetable = {
        "Monday": ["ğŸ“¢ PC", "ğŸŒ Humanities", "ğŸ“– Double English", "ğŸ¥— Future Foods", "ğŸ•Šï¸ RaVE", "ğŸ§® Maths", "ğŸ¸ Double Rock", "ğŸ† APS Sport"],
        "Tuesday": ["ğŸ“¢ PC", "ğŸ“– Double English", "ğŸ§˜ Assembly", "ğŸ§® Maths", "ğŸ¥— Future Foods", "ğŸƒ PE", "ğŸ•Šï¸ RaVE", "ğŸ§ª Science"],
        "Wednesday": ["ğŸ“¢ PC", "ğŸ§® Double Maths", "ğŸ“– English", "ğŸŒ Double Humanities", "ğŸ¸ School of Rock", "ğŸ§ª Science", "ğŸ‡¨ğŸ‡³ Chinese"],
        "Thursday": ["ğŸ“¢ PC", "ğŸ¸ School of Rock", "ğŸƒ Double PE", "ğŸ§® Double Maths", "ğŸŒ Humanities", "ğŸ¥— Double Foods"],
        "Friday": ["ğŸ§ª Double Science", "ğŸ“– English", "ğŸ‡¨ğŸ‡³ Chinese", "ğŸ† Sport"], 
        "Saturday": ["ğŸ‰ No School", "ğŸ® Relax", "ğŸ§¹ Clean Room"],
        "Sunday": ["ğŸ‰ No School", "ğŸ“ Finish Homework", "ğŸ’ Pack Bag"]
    };

    // 2. CHORES
    const dailyChores = {
        "Monday": "Empty Dishwasher",
        "Tuesday": "Take out Bins",
        "Wednesday": "Walk the Dog",
        "Thursday": "Clean Room",
        "Friday": "Pack Sports Gear",
        "Saturday": "Vacuum",
        "Sunday": "Iron Uniforms"
    };

    // 3. UNIFORMS
    const schoolUniforms = {
        "Monday": "Sports PE",
        "Tuesday": "Formal Grey",
        "Wednesday": "Formal Grey",
        "Thursday": "Formal Grey",
        "Friday": "Sports PE",
        "Saturday": "Casual",
        "Sunday": "Casual"
    };

    // --- MAIN LOGIC ---

    function updateSchoolData() {
        const now = new Date();
        const dayName = daysOfWeek[now.getDay()];

        // HOLIDAY CHECK
        if (now < schoolStartDate) {
            document.getElementById("subject-list").innerHTML = "<li>ğŸ‰ School Holidays!</li><li>ğŸ® Relax</li><li>ğŸ–ï¸ Beach</li>";
            document.getElementById("todays-uniform").textContent = "Casual";
            document.getElementById("uniform-icon").textContent = "ğŸ‘•";
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
        } else {
            // NORMAL TERM
            const subjects = schoolTimetable[dayName] || ["No School Data"];
            const subjectList = document.getElementById("subject-list");
            subjectList.innerHTML = ""; 
            subjects.forEach(subject => {
                const li = document.createElement("li");
                li.textContent = subject;
                subjectList.appendChild(li);
            });
            document.getElementById("todays-chore").textContent = dailyChores[dayName] || "Check Calendar";
            
            const uniform = schoolUniforms[dayName] || "Casual";
            document.getElementById("todays-uniform").textContent = uniform;
            
            const uniformIcon = document.getElementById("uniform-icon");
            if(uniform.includes("Sport") || uniform.includes("PE")) {
                uniformIcon.textContent = "ğŸ‘Ÿ"; 
            } else if (uniform.includes("Formal")) {
                uniformIcon.textContent = "ğŸ‘”"; 
            } else {
                uniformIcon.textContent = "ğŸ‘•"; 
            }
        }
    }

    updateSchoolData();

    // CLOCK
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        document.getElementById('date').innerText = now.toLocaleDateString([], {weekday: 'long', month: 'short', day: 'numeric'});
        
        if(now.getHours() === 0 && now.getMinutes() === 0 && now.getSeconds() === 0) {
            updateSchoolData();
        }
    }
    setInterval(updateClock, 1000);
    updateClock();

    // COUNTDOWN
    const targetDate = new Date("2026-06-18T00:00:00").getTime();
    function updateCountdown() {
        const now = new Date().getTime();
        const diff = targetDate - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24)); 
        document.getElementById('countdown').innerText = days > 0 ? days : "Here!";
    }
    updateCountdown();

    // CURRENCY
    async function fetchRate() {
        try {
            const response = await fetch('https://api.frankfurter.app/latest?from=AUD&to=JPY');
            const data = await response.json();
            const rate = data.rates.JPY;
            document.getElementById('yen-rate').innerText = "Â¥" + Math.floor(rate);
            document.getElementById('exact-rate').innerText = rate.toFixed(2);
        } catch (error) {
            document.getElementById('yen-rate').innerText = "-";
        }
    }
    fetchRate();
    setInterval(fetchRate, 3600000); 

    // --- MLB LOGIC ---
    const openingDay = new Date("2026-03-26T00:00:00").getTime();
    
    function updateMLB() {
        const now = new Date().getTime();
        const diff = openingDay - now;
        const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
        document.getElementById('mlb-days').innerText = days > 0 ? days : "0";
    }
    updateMLB();

    async function fetchMLBNews() {
        try {
            const proxyUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://www.mlb.com/feeds/news/rss.xml');
            
            const res = await fetch(proxyUrl);
            const data = await res.json();
            
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(data.contents, "text/xml");
            const items = xmlDoc.querySelectorAll("item");
            
            const list = document.getElementById('mlb-news');
            list.innerHTML = "";
            
            for (let i = 0; i < 3; i++) {
                if (items[i]) {
                    let title = items[i].querySelector("title").textContent;
                    if(title.length > 55) title = title.substring(0, 55) + "...";

                    const li = document.createElement('li');
                    li.style.borderBottom = "1px solid rgba(255,255,255,0.1)";
                    li.style.paddingBottom = "1vh";
                    li.innerText = title;
                    list.appendChild(li);
                }
            }

        } catch (error) {
            const list = document.getElementById('mlb-news');
            list.innerHTML = `
                <li style="color: #aaa; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:1vh;">Pitchers/Catchers Report: Feb 14</li>
                <li style="color: #aaa; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:1vh;">Spring Games Begin: Feb 20</li>
                <li style="color: #aaa;">Regular Season Start: Mar 26</li>
            `;
        }
    }
    fetchMLBNews();
    setInterval(fetchMLBNews, 3600000); 

    // BACKGROUNDS
    const images = [
        "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1506929562872-bb421503ef21?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1542051841857-5f90071e7989?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1528360983277-13d9b152c6d1?auto=format&fit=crop&w=2560&q=80",
        "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=2560&q=80"
    ];
    let currentImageIndex = 0;
    function rotateBackground() {
        document.body.style.backgroundImage = `url('${images[currentImageIndex]}')`;
        currentImageIndex = (currentImageIndex + 1) % images.length;
    }
    rotateBackground();
    setInterval(rotateBackground, 30000);
</script>

</body>
</html>
